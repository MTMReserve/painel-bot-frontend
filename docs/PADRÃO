ğŸ“„ DOCUMENTO OFICIAL â€” PADRÃƒO DE EXECUÃ‡ÃƒO BACK-END painel-bot
ğŸ“Œ OBJETIVO
Estabelecer o padrÃ£o oficial, definitivo e estÃ¡vel para execuÃ§Ã£o do back-end (src/server/) do projeto painel-bot, garantindo compatibilidade com:

TypeScript moderno

MÃ³dulo ESM (import/export)

ExecuÃ§Ã£o via tsx sem build prÃ©vio

Deploy em ambientes modernos (VPS, Railway, Vercel etc.)

Front-end baseado em React/Vite (que jÃ¡ Ã© ESM)

âœ… PADRÃƒO OFICIAL ESCOLHIDO
ğŸ“Œ OPÃ‡ÃƒO 1 â€” Node.js 20 LTS + "type": "module" + tsx

Essa arquitetura garante compatibilidade total entre front e back, execuÃ§Ã£o moderna, e estabilidade em produÃ§Ã£o.

ğŸ§± COMPONENTES DO PADRÃƒO
Item	PadrÃ£o adotado	Justificativa
Node.js	v20.x LTS	CompatÃ­vel com tsx, ESM, bibliotecas modernas, e com manutenÃ§Ã£o garantida
Tipo de mÃ³dulo	"type": "module"	Suporte a import/export no back-end
Executor de dev	tsx	Executa .ts diretamente sem build prÃ©vio
Scripts	"dev:api": "tsx --project tsconfig.server.json src/server/server.ts"	ExecuÃ§Ã£o clara e confiÃ¡vel do back-end
Estrutura de projeto	src/client e src/server	SeparaÃ§Ã£o de front e back para monorepo limpo
Gerenciador de versÃ£o	nvm	Troca rÃ¡pida e segura de versÃµes Node entre devs e produÃ§Ã£o

ğŸ”„ COMO INSTALAR O AMBIENTE CORRETO
1. Instalar o NVM (Windows):
Baixe e instale a versÃ£o mais recente:
ğŸ‘‰ https://github.com/coreybutler/nvm-windows/releases

2. Instalar o Node 20 LTS:
bash
Copiar
Editar
nvm install 20
nvm use 20
Verifique:

bash
Copiar
Editar
node -v     # deve retornar v20.x.x
3. Instalar dependÃªncias:
bash
Copiar
Editar
npm install
ğŸš€ EXECUÃ‡ÃƒO EM DESENVOLVIMENTO
Front-end:
bash
Copiar
Editar
npm run dev
Back-end:
bash
Copiar
Editar
npm run dev:api
Esse comando executa:

bash
Copiar
Editar
tsx --project tsconfig.server.json src/server/server.ts
ğŸ“¦ BUILD DE PRODUÃ‡ÃƒO
1. Compilar:
bash
Copiar
Editar
npx tsc --project tsconfig.server.json
2. Executar:
bash
Copiar
Editar
node dist/server.js
ğŸ›‘ PROBLEMAS EVITADOS COM ESSE PADRÃƒO
Problema resolvido	Como foi evitado
bad option: --project	TSX instalado corretamente com Node 20
Unknown file extension ".ts"	Node 20 aceita .ts com tsx
ERR_MODULE_NOT_FOUND com @server/...	Pode ser tratado com tsconfig-paths opcional
Conflito entre .cjs e "type": "module"	Eliminamos .cjs, padronizando com ESM e .ts
Rodar cÃ³digo sem build manual	tsx permite execuÃ§Ã£o direta em dev

ğŸ§  CONSIDERAÃ‡Ã•ES IMPORTANTES
Node 22 nÃ£o deve ser usado neste projeto atÃ© que suporte estÃ¡vel a ESM+TS seja garantido.

Evite misturar "require" com "import"

Sempre use extensÃµes em imports quando estiver em "type": "module", como:

ts
Copiar
Editar
import { minhaFuncao } from "./meuModulo.js";
ğŸ“Œ IMPORTANTE PARA MANUTENÃ‡ÃƒO FUTURA
âš ï¸ Se no futuro o projeto quebrar com tsx, npx, node ou import/export, vocÃª deve retornar a este documento e confirmar:

A versÃ£o ativa do Node (node -v)

O tipo de mÃ³dulo do package.json

Se o tsx estÃ¡ instalado

Se estÃ¡ usando nvm use 20

âœ… CHECKLIST DE CONFIGURAÃ‡ÃƒO ATUAL
Item	Status esperado
Node.js v20.x	âœ… node -v = v20.x.x
"type": "module"	âœ… no package.json
TSX instalado	âœ… npx tsx --version funcionando
Imports com extensÃ£o	âœ… .js ou .ts explicito
Sem .cjs ou require	âœ… CÃ³digo moderno e unificado

ğŸ FINAL
Este documento define o padrÃ£o de execuÃ§Ã£o oficial do projeto painel-bot.
Todas as futuras decisÃµes de build, execuÃ§Ã£o, troubleshooting ou onboarding de devs devem seguir este padrÃ£o.